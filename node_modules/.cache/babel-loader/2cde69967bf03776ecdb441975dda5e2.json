{"ast":null,"code":"import _defineProperty from \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/src/Components/ProjectForm.js\";\n//Alimente le modal envoyé au tatoueur depuis le UserPage/FavTattoosProfile et depuis TattooModal/TattooArtistCardModal\nimport React from 'react'; //material UI\n\nimport { Step, Stepper, StepLabel, StepContent } from 'material-ui/Stepper';\nimport TextField from 'material-ui/TextField';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport FlatButton from 'material-ui/FlatButton';\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider'; //reactstrap\n\nimport { Modal, ModalHeader, ModalBody, Button } from 'reactstrap';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\nimport { connect } from 'react-redux';\n\nvar ProjectForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ProjectForm, _React$Component);\n\n  function ProjectForm(props) {\n    var _this;\n\n    _classCallCheck(this, ProjectForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProjectForm).call(this, props));\n    _this.handleNext = _this.handleNext.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handlePrev = _this.handlePrev.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.renderStepActions = _this.renderStepActions.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.toggle = _this.toggle.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      finished: false,\n      stepIndex: 0,\n      description: \"\",\n      phone: \"\",\n      availability: \"\",\n      value: 1,\n      visible: false,\n      artistName: '',\n      artistEmail: ''\n    };\n    return _this;\n  }\n\n  _createClass(ProjectForm, [{\n    key: \"toggle\",\n    value: function toggle() {\n      this.setState({\n        visible: !this.state.visible\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var ctx = this; //collecter les informations de l'artiste depuis la DB\n\n      fetch('http://localhost:3000/artist?artist_id=' + this.props.artistId).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        ctx.setState({\n          artistName: data.result.artistNickname,\n          artistEmail: 'wguerrouani@gmail.com'\n        });\n      }).catch(function (error) {\n        console.log('Request failed', error);\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.clickToSend !== prevProps.clickToSend) {\n        this.setState({\n          visible: !this.state.visible\n        });\n      }\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event, index, value) {\n      var _this$setState;\n\n      this.setState((_this$setState = {}, _defineProperty(_this$setState, event.target.name, event.target.value), _defineProperty(_this$setState, \"value\", value), _this$setState));\n    } //fetch update à mettre en place pour BDD User\n\n  }, {\n    key: \"handleNext\",\n    value: function handleNext() {\n      var ctx = this;\n      fetch('http://localhost:3000/newlead', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: 'userID=' + this.props.userID + '&artistID=' + this.props.artistId + '&dateLead=' + Date.now()\n      });\n\n      if (this.state.stepIndex === 2) {\n        //si on est sur la dernière page du form, envoyer les informations (user depuis le Store et tatoueur depuis la DB) au tatoueur à travers Zapier\n        fetch('https://hooks.zapier.com/hooks/catch/4067341/cbsyve/', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          },\n          body: 'artistName=' + this.state.artistName + '&artistEmail=' + this.state.artistEmail + '&userFirstName=' + this.props.userFirstName + '&userEmail=' + this.props.userEmail + '&userTelephone=' + this.props.userTelephone + '&userTattooDescription=' + this.props.userTattooDescription + '&userAvailability=' + this.props.userAvailability + '&userFavoriteTattoo=' + this.props.userFavoriteTattoo\n        }).then(function (response) {\n          return response.json();\n        }).then(function (data) {\n          console.log(data);\n          ctx.setState({\n            stepIndex: this.state.stepIndex + 1,\n            finished: this.state.stepIndex >= 2\n          });\n        }).catch(function (error) {\n          console.log('Request failed', error);\n        });\n      } else {\n        ctx.setState({\n          stepIndex: this.state.stepIndex + 1,\n          finished: this.state.stepIndex >= 2\n        });\n      }\n    }\n  }, {\n    key: \"handlePrev\",\n    value: function handlePrev() {\n      if (this.state.stepIndex > 0) {\n        this.setState({\n          stepIndex: this.state.stepIndex - 1\n        });\n      }\n    }\n  }, {\n    key: \"renderStepActions\",\n    value: function renderStepActions(step) {\n      var stepIndex = this.state.stepIndex;\n      return React.createElement(\"div\", {\n        style: {\n          margin: '12px 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(RaisedButton, {\n        label: stepIndex < 2 ? 'Suivant' : 'Envoyer',\n        disableTouchRipple: true,\n        disableFocusRipple: true,\n        primary: true,\n        onClick: this.handleNext,\n        style: {\n          marginRight: 12\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), step > 0 && React.createElement(FlatButton, {\n        label: \"Pr\\xE9c\\xE9dent\",\n        disabled: stepIndex === 0,\n        disableTouchRipple: true,\n        disableFocusRipple: true,\n        onClick: this.handlePrev,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          finished = _this$state.finished,\n          stepIndex = _this$state.stepIndex,\n          description = _this$state.description,\n          phone = _this$state.phone,\n          availability = _this$state.availability;\n      return React.createElement(MuiThemeProvider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          maxHeight: 400,\n          margin: 'auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        isOpen: this.state.visible,\n        toggle: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(ModalHeader, {\n        toggle: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), React.createElement(ModalBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(Stepper, {\n        activeStep: stepIndex,\n        orientation: \"vertical\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(Step, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(StepLabel, {\n        className: \"stepLabelForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, \"D\\xE9crivez votre projet\"), React.createElement(StepContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        name: \"description\",\n        hintText: \"ex : une fleur en dot sur l'omoplate\",\n        multiLine: true,\n        floatingLabelText: \"Parlez nous de votre projet\",\n        rows: 2,\n        rowsMax: 3,\n        fullWidth: true,\n        onChange: this.handleChange,\n        value: this.state.description,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }), this.renderStepActions(0))), React.createElement(Step, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(StepLabel, {\n        className: \"stepLabelForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"Pour \\xEAtre contact\\xE9\"), React.createElement(StepContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        name: \"phone\",\n        floatingLabelFixed: \"Votre num\\xE9ro de t\\xE9l\\xE9phone\",\n        floatingLabelText: \"Laissez votre num\\xE9ro au tatoueur\",\n        hintText: \"(+33)6 61 23 45 67\",\n        fullWidth: true,\n        onChange: this.handleChange,\n        value: this.state.phone,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }), this.renderStepActions(1))), React.createElement(Step, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(StepLabel, {\n        className: \"stepLabelForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"Vous pr\\xE9f\\xE9rez \\xEAtre contact\\xE9\"), React.createElement(StepContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(SelectField, {\n        name: \"availability\",\n        fullWidth: true,\n        onChange: this.handleChange,\n        value: this.state.value,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(MenuItem, {\n        value: 1,\n        primaryText: \"D\\xE9finissez un cr\\xE9neau\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), React.createElement(MenuItem, {\n        value: 2,\n        primaryText: \"midi (entre 12h et 14h)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), React.createElement(MenuItem, {\n        value: 3,\n        primaryText: \"apr\\xE8s-midi (entre 14h et 17h)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }), React.createElement(MenuItem, {\n        value: 4,\n        primaryText: \"soir (entre 17h et 19h)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      })), this.renderStepActions(2)))), finished && React.createElement(\"p\", {\n        style: {\n          margin: '20px 0',\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, \"Votre demande a bien \\xE9t\\xE9 envoy\\xE9e !\")))));\n    }\n  }]);\n\n  return ProjectForm;\n}(React.Component);\n\nfunction mapStateToProps(store) {\n  return {\n    userID: store.user._id,\n    userFirstName: store.user.userFirstName,\n    userEmail: store.user.userEmail,\n    userTelephone: store.user.userTelephone,\n    userFavoriteTattoo: store.user.userFavoriteTattoo,\n    userTattooDescription: store.user.userTattooDescription,\n    userAvailability: store.user.userAvailability\n  };\n}\n\nexport default connect(mapStateToProps, null)(ProjectForm);","map":{"version":3,"sources":["/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/src/Components/ProjectForm.js"],"names":["React","Step","Stepper","StepLabel","StepContent","TextField","RaisedButton","FlatButton","MuiThemeProvider","Modal","ModalHeader","ModalBody","Button","SelectField","MenuItem","connect","ProjectForm","props","handleNext","bind","handlePrev","handleChange","renderStepActions","toggle","state","finished","stepIndex","description","phone","availability","value","visible","artistName","artistEmail","setState","ctx","fetch","artistId","then","response","json","data","result","artistNickname","catch","error","console","log","prevProps","clickToSend","event","index","target","name","method","headers","body","userID","Date","now","userFirstName","userEmail","userTelephone","userTattooDescription","userAvailability","userFavoriteTattoo","step","margin","marginRight","maxHeight","textAlign","Component","mapStateToProps","store","user","_id"],"mappings":"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","sourcesContent":["//Alimente le modal envoyé au tatoueur depuis le UserPage/FavTattoosProfile et depuis TattooModal/TattooArtistCardModal\n\nimport React from 'react';\n\n//material UI\nimport {\n  Step,\n  Stepper,\n  StepLabel,\n  StepContent,\n} from 'material-ui/Stepper';\nimport TextField from 'material-ui/TextField';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport FlatButton from 'material-ui/FlatButton';\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider'\n\n//reactstrap\nimport { Modal, ModalHeader, ModalBody, Button } from 'reactstrap';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nimport SelectField from 'material-ui/SelectField';\nimport MenuItem from 'material-ui/MenuItem';\n\nimport {connect} from 'react-redux';\n\n\nclass ProjectForm extends React.Component {\n constructor(props){\n   super(props);\n   this.handleNext = this.handleNext.bind(this);\n   this.handlePrev = this.handlePrev.bind(this);\n   this.handleChange = this.handleChange.bind(this);\n   this.renderStepActions = this.renderStepActions.bind(this);\n   this.toggle = this.toggle.bind(this);\n   this.state ={\n     finished: false,\n     stepIndex: 0,\n     description: \"\",\n     phone:\"\",\n     availability:\"\",\n     value: 1,\n     visible: false,\n     artistName:'',\n     artistEmail:''\n   }\n }\n\n toggle() {\n   this.setState({\n       visible:!this.state.visible\n     });\n }\ncomponentDidMount(){\n  var ctx = this;\n//collecter les informations de l'artiste depuis la DB\n  fetch('http://localhost:3000/artist?artist_id='+this.props.artistId)\n  .then(function(response) {\n    return response.json();\n  })\n  .then(function(data) {\n     ctx.setState({\n       artistName: data.result.artistNickname,\n       artistEmail: 'wguerrouani@gmail.com'\n     })\n     })\n   .catch(function(error) {\n    console.log('Request failed', error);\n  });\n}\n\ncomponentDidUpdate(prevProps){\n  if(this.props.clickToSend !==prevProps.clickToSend){\n    this.setState({\n      visible: !this.state.visible\n    })\n  }\n}\n\n handleChange(event,index, value) {\n     this.setState({\n       [event.target.name]: event.target.value,\n       value: value\n     });\n   }\n//fetch update à mettre en place pour BDD User\n  handleNext(){\n  var ctx = this;\n    fetch('http://localhost:3000/newlead', {\n      method: 'POST',\n      headers: {'Content-Type':'application/x-www-form-urlencoded'},\n      body: 'userID='+this.props.userID +'&artistID='+this.props.artistId +'&dateLead='+ Date.now()\n    });\n\n\n    if(this.state.stepIndex=== 2){\n    //si on est sur la dernière page du form, envoyer les informations (user depuis le Store et tatoueur depuis la DB) au tatoueur à travers Zapier\n      fetch('https://hooks.zapier.com/hooks/catch/4067341/cbsyve/', {\n      method: 'POST',\n      headers: {'Content-Type':'application/x-www-form-urlencoded'},\n      body: 'artistName='+this.state.artistName+'&artistEmail='+ this.state.artistEmail+'&userFirstName='+ this.props.userFirstName +'&userEmail='+this.props.userEmail +'&userTelephone='+this.props.userTelephone +'&userTattooDescription='+this.props.userTattooDescription +'&userAvailability='+this.props.userAvailability + '&userFavoriteTattoo='+this.props.userFavoriteTattoo\n    })\n      .then(function(response) {\n        return response.json();\n      })\n      .then(function(data) {\n        console.log(data)\n         ctx.setState({\n           stepIndex: this.state.stepIndex + 1,\n           finished: this.state.stepIndex >= 2\n         })\n         })\n       .catch(function(error) {\n        console.log('Request failed', error);\n      });\n    }else{\n      ctx.setState({\n        stepIndex: this.state.stepIndex + 1,\n        finished: this.state.stepIndex >= 2\n      })\n    }\n  };\n\n  handlePrev(){\n    if (this.state.stepIndex > 0){\n      this.setState({\n        stepIndex: this.state.stepIndex - 1\n      });\n    }\n  };\n\n  renderStepActions(step) {\n    const {stepIndex} = this.state;\n\n    return (\n      <div style={{margin: '12px 0'}}>\n        <RaisedButton\n          label={stepIndex < 2 ? 'Suivant' : 'Envoyer'}\n          disableTouchRipple={true}\n          disableFocusRipple={true}\n          primary={true}\n          onClick={this.handleNext}\n          style={{marginRight: 12}}\n        />\n        {step > 0 && (\n          <FlatButton\n            label=\"Précédent\"\n            disabled={stepIndex === 0}\n            disableTouchRipple={true}\n            disableFocusRipple={true}\n            onClick={this.handlePrev}\n          />\n        )}\n      </div>\n    );\n  }\n\n  render() {\n    const {finished, stepIndex, description, phone, availability} = this.state;\n    return (\n  <MuiThemeProvider>\n    {/* <Button color=\"danger\" onClick={this.toggle}>Formulaire</Button> */}\n    <div style={{maxHeight: 400, margin: 'auto'}}>\n    <Modal isOpen={this.state.visible} toggle={this.toggle}>\n      <ModalHeader toggle={this.toggle}></ModalHeader>\n      <ModalBody>\n\n        <Stepper activeStep={stepIndex} orientation=\"vertical\">\n          <Step>\n            <StepLabel className=\"stepLabelForm\">Décrivez votre projet</StepLabel>\n            <StepContent>\n              <TextField\n                name=\"description\"\n                hintText=\"ex : une fleur en dot sur l'omoplate\"\n                multiLine={true}\n                floatingLabelText=\"Parlez nous de votre projet\"\n                rows={2}\n                rowsMax={3}\n                fullWidth={true}\n                onChange={this.handleChange}\n                value={this.state.description}\n              />\n              {this.renderStepActions(0)}\n            </StepContent>\n          </Step>\n          <Step>\n            <StepLabel className=\"stepLabelForm\">Pour être contacté</StepLabel>\n            <StepContent>\n              <TextField\n                name=\"phone\"\n                floatingLabelFixed=\"Votre numéro de téléphone\"\n                floatingLabelText=\"Laissez votre numéro au tatoueur\"\n                hintText=\"(+33)6 61 23 45 67\"\n                fullWidth={true}\n                onChange={this.handleChange}\n                value={this.state.phone}\n              />\n            {this.renderStepActions(1)}\n            </StepContent>\n          </Step>\n          <Step>\n            <StepLabel className=\"stepLabelForm\">Vous préférez être contacté</StepLabel>\n            <StepContent>\n              <SelectField\n                  name=\"availability\"\n                  fullWidth={true}\n                  onChange={this.handleChange}\n                  value={this.state.value}\n                >\n                  <MenuItem value={1} primaryText=\"Définissez un créneau\" />\n                  <MenuItem value={2} primaryText=\"midi (entre 12h et 14h)\" />\n                  <MenuItem value={3} primaryText=\"après-midi (entre 14h et 17h)\" />\n                  <MenuItem value={4} primaryText=\"soir (entre 17h et 19h)\" />\n              </SelectField>\n              {this.renderStepActions(2)}\n            </StepContent>\n          </Step>\n\n        </Stepper>\n        {finished && (<p style={{margin: '20px 0', textAlign: 'center'}}>\n            Votre demande a bien été envoyée !\n                    </p>\n            )}\n\n      </ModalBody>\n    </Modal>\n    </div>\n  </MuiThemeProvider>\n    );\n  }\n}\n\nfunction mapStateToProps(store) {\n  return {\n    userID: store.user._id,\n    userFirstName: store.user.userFirstName,\n    userEmail: store.user.userEmail,\n    userTelephone: store.user.userTelephone,\n    userFavoriteTattoo: store.user.userFavoriteTattoo,\n    userTattooDescription: store.user.userTattooDescription,\n    userAvailability: store.user.userAvailability\n  }\n}\n\nexport default connect(\n    mapStateToProps,\n    null\n)(ProjectForm);\n"]},"metadata":{},"sourceType":"module"}