{"ast":null,"code":"import _defineProperty from \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/src/Components/AuthForm.js\";\nimport React from 'react'; //Import des librairies ou composants de style\n\nimport 'bootstrap/dist/css/bootstrap.css';\nimport { Col, Row, Button, Form, FormGroup, Label, Input, FormText, Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport '../Stylesheets/SignUpAndInForm.css';\nimport url from '../config.js';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport '@fortawesome/free-solid-svg-icons';\nimport { faUser } from '@fortawesome/free-regular-svg-icons';\nimport { connect } from 'react-redux';\n\nvar AuthForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AuthForm, _React$Component);\n\n  function AuthForm(props) {\n    var _this;\n\n    _classCallCheck(this, AuthForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AuthForm).call(this, props));\n    _this.state = {\n      modal: false,\n      lastName: '',\n      firstName: '',\n      signUpEmail: '',\n      signUpPassword: '',\n      signInEmail: '',\n      signInPassword: '',\n      user: {},\n      alreadyInDB: false,\n      wrongPassword: false,\n      errorSignUp: false,\n      errorSignIn: false\n    };\n    _this.toggle = _this.toggle.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSignIn = _this.handleSignIn.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSignUp = _this.handleSignUp.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(AuthForm, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.clickOnForm !== prevProps.clickOnForm) {\n        this.setState({\n          modal: true\n        });\n      }\n    }\n  }, {\n    key: \"toggle\",\n    value: function toggle() {\n      this.setState({\n        modal: !this.state.modal,\n        alreadyInDB: false,\n        wrongPassword: false,\n        errorSignUp: false,\n        errorSignIn: false\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState(_defineProperty({}, event.target.name, event.target.value));\n    } //Method to create user in database\n\n  }, {\n    key: \"handleSignUp\",\n    value: function handleSignUp(event) {\n      var _this2 = this;\n\n      var ctx = this;\n      fetch('https://glacial-sierra-22438.herokuapp.com' + '/signup', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: \"userFirstName=\" + ctx.state.firstName + \"&userLastName=\" + ctx.state.lastName + \"&userEmail=\" + ctx.state.signUpEmail + \"&userPassword=\" + ctx.state.signUpPassword\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        if (data.signup === true) {\n          _this2.setState({\n            modal: !ctx.state.modal,\n            user: data.result\n          });\n\n          _this2.props.signUpClick(ctx.state.user);\n        } else if (data.result === \"alreadyInDB\") {\n          _this2.setState({\n            alreadyInDB: true\n          });\n        } else {\n          _this2.setState({\n            errorSignUp: true\n          });\n        }\n      }).catch(function (error) {\n        return console.log(\"request failed :\", error);\n      });\n      event.preventDefault();\n    } //Method to check if user is in database\n\n  }, {\n    key: \"handleSignIn\",\n    value: function handleSignIn(event) {\n      var _this3 = this;\n\n      var ctx = this;\n      fetch('https://glacial-sierra-22438.herokuapp.com' + '/signin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: 'userEmail=' + ctx.state.signInEmail + \"&userPassword=\" + ctx.state.signInPassword\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        if (data.signin === true) {\n          _this3.setState({\n            modal: !ctx.state.modal,\n            user: data.result\n          });\n\n          _this3.props.signInClick(ctx.state.user);\n        } else if (data.result === \"wrongPassword\") {\n          _this3.setState({\n            wrongPassword: true\n          });\n        } else {\n          _this3.setState({\n            errorSignIn: true\n          });\n        }\n      }).catch(function (error) {\n        return console.log(\"request failed :\", error);\n      });\n      event.preventDefault();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        isOpen: this.state.modal,\n        toggle: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(ModalHeader, {\n        toggle: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), React.createElement(ModalBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"formRowForSignin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"signCatForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Connexion\"), this.state.errorSignIn ? React.createElement(Alert, {\n        color: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Il semblerait que nous vous connaissions pas encore. Pourriez-vous vous inscrire avant? \") : null, this.state.wrongPassword ? React.createElement(Alert, {\n        color: \"warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Mince, le mot de passe n'est pas correct, pourriez-vous r\\xE9essayer? \") : null), React.createElement(Col, {\n        md: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"signInEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Votre email\"), React.createElement(Input, {\n        className: \"inputFormSignIn\",\n        type: \"email\",\n        name: \"signInEmail\",\n        id: \"signInEmail\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        md: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"signInPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"Entrez votre mot de passe\"), React.createElement(Input, {\n        className: \"inputFormSignIn\",\n        type: \"password\",\n        name: \"signInPassword\",\n        id: \"signInPassword\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      })))), React.createElement(Button, {\n        outline: true,\n        color: \"success\",\n        onClick: this.handleSignIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"Connectez-vous\")), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }), React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"formRowForSignin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"signCatForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Inscription\"), this.state.errorSignUp ? React.createElement(Alert, {\n        color: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"Oops, un bug! Est-ce que vous pourriez vous inscrire de nouveau? \") : null, this.state.alreadyInDB ? React.createElement(Alert, {\n        color: \"warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Il semblerait que vous soyez d\\xE9j\\xE0 un des notres, pourriez-vous vous connecter directement? \") : null), React.createElement(Col, {\n        md: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"lastName\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Votre nom\"), React.createElement(Input, {\n        className: \"inputFormSignIn\",\n        type: \"text\",\n        name: \"lastName\",\n        id: \"lastName\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        md: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"firstName\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"Votre pr\\xE9nom\"), React.createElement(Input, {\n        className: \"inputFormSignIn\",\n        type: \"text\",\n        name: \"firstName\",\n        id: \"firstName\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        md: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"signUpEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"Votre email\"), React.createElement(Input, {\n        className: \"inputFormSignIn\",\n        type: \"email\",\n        name: \"signUpEmail\",\n        id: \"signUpEmail\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        md: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"signUpPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"Cr\\xE9ez un mot de passe\"), React.createElement(Input, {\n        className: \"inputFormSignIn\",\n        type: \"password\",\n        name: \"signUpPassword\",\n        id: \"signUpPassword\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      })))), React.createElement(Button, {\n        outline: true,\n        color: \"success\",\n        onClick: this.handleSignUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \"Inscrivez-vous\")))));\n    }\n  }]);\n\n  return AuthForm;\n}(React.Component);\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    signUpClick: function signUpClick(user) {\n      dispatch({\n        type: 'signup',\n        userSignUp: user\n      });\n    },\n    signInClick: function signInClick(user) {\n      dispatch({\n        type: 'signin',\n        userSignIn: user\n      });\n    }\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(AuthForm);","map":{"version":3,"sources":["/Users/wassimaguerro/Desktop/La Capsule/zz-FindMyTattooMVP/FindMyTattooFront/src/Components/AuthForm.js"],"names":["React","Col","Row","Button","Form","FormGroup","Label","Input","FormText","Modal","ModalHeader","ModalBody","ModalFooter","Alert","url","FontAwesomeIcon","faUser","connect","AuthForm","props","state","modal","lastName","firstName","signUpEmail","signUpPassword","signInEmail","signInPassword","user","alreadyInDB","wrongPassword","errorSignUp","errorSignIn","toggle","bind","handleChange","handleSignIn","handleSignUp","prevProps","clickOnForm","setState","event","target","name","value","ctx","fetch","method","headers","body","then","response","json","data","signup","result","signUpClick","catch","error","console","log","preventDefault","signin","signInClick","Component","mapDispatchToProps","dispatch","type","userSignUp","userSignIn"],"mappings":"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","sourcesContent":["import React from 'react';\n\n//Import des librairies ou composants de style\nimport 'bootstrap/dist/css/bootstrap.css';\nimport { Col, Row, Button, Form, FormGroup, Label, Input, FormText, Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport '../Stylesheets/SignUpAndInForm.css';\nimport url from '../config.js';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {  } from '@fortawesome/free-solid-svg-icons'\nimport { faUser } from '@fortawesome/free-regular-svg-icons'\n\nimport {connect} from 'react-redux';\n\nclass AuthForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal: false,\n      lastName: '',\n      firstName: '',\n      signUpEmail: '',\n      signUpPassword: '',\n      signInEmail: '',\n      signInPassword: '',\n      user : {},\n      alreadyInDB : false,\n      wrongPassword : false,\n      errorSignUp : false,\n      errorSignIn : false,\n    };\n    this.toggle = this.toggle.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSignIn = this.handleSignIn.bind(this);\n    this.handleSignUp = this.handleSignUp.bind(this);\n  }\n\n  componentDidUpdate(prevProps){\n    if (this.props.clickOnForm!==prevProps.clickOnForm) {\n      this.setState({\n        modal : true,\n      });\n    }\n  }\n\n  toggle() {\n    this.setState({\n      modal: !this.state.modal,\n      alreadyInDB : false,\n      wrongPassword : false,\n      errorSignUp : false,\n      errorSignIn : false,\n    });\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  //Method to create user in database\n  handleSignUp(event) {\n    var ctx = this;\n    fetch('https://glacial-sierra-22438.herokuapp.com'+'/signup', {\n        method: 'POST',\n        headers: {'Content-Type':'application/x-www-form-urlencoded'},\n        body: \"userFirstName=\" + ctx.state.firstName + \"&userLastName=\" + ctx.state.lastName + \"&userEmail=\" + ctx.state.signUpEmail + \"&userPassword=\" + ctx.state.signUpPassword\n      })\n      .then((response) => response.json())\n      .then((data) => {\n        if (data.signup === true) {\n          this.setState({\n            modal: !ctx.state.modal,\n            user : data.result\n          });\n          this.props.signUpClick(ctx.state.user);\n        } else if (data.result === \"alreadyInDB\") {\n          this.setState({\n            alreadyInDB : true\n          });\n        } else {\n          this.setState({\n            errorSignUp : true\n          });\n        }\n      })\n      .catch((error) => console.log(\"request failed :\", error))\n    event.preventDefault();\n  }\n\n  //Method to check if user is in database\n  handleSignIn(event) {\n    var ctx = this;\n    fetch('https://glacial-sierra-22438.herokuapp.com'+'/signin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: 'userEmail=' + ctx.state.signInEmail + \"&userPassword=\" + ctx.state.signInPassword\n      })\n      .then((response) => response.json())\n      .then((data) => {\n        if(data.signin === true){\n          this.setState({\n             modal: !ctx.state.modal,\n             user : data.result\n         })\n         this.props.signInClick(ctx.state.user);\n        } else if(data.result === \"wrongPassword\") {\n          this.setState({\n            wrongPassword : true\n          });\n        } else {\n          this.setState({\n            errorSignIn : true\n          });\n        }\n      })\n      .catch((error) => console.log(\"request failed :\", error))\n    event.preventDefault();\n  }\n  render() {\n    return (\n      <div>\n        <Modal isOpen={this.state.modal} toggle={this.toggle}>\n          <ModalHeader toggle={this.toggle}></ModalHeader>\n          <ModalBody>\n            <Form>\n              <Row className=\"formRowForSignin\">\n                <Col xs = \"12\">\n                  <h4 className=\"signCatForm\">Connexion</h4>\n                  {this.state.errorSignIn ?\n                  <Alert color=\"danger\">Il semblerait que nous vous connaissions pas encore. Pourriez-vous vous inscrire avant? </Alert> : null }\n                  {this.state.wrongPassword ?\n                  <Alert color=\"warning\">Mince, le mot de passe n'est pas correct, pourriez-vous réessayer? </Alert> : null }\n                </Col>\n                <Col md={6}>\n                  <FormGroup>\n                    <Label for=\"signInEmail\">Votre email</Label>\n                    <Input className=\"inputFormSignIn\" type=\"email\" name=\"signInEmail\" id=\"signInEmail\" onChange={this.handleChange}/>\n                  </FormGroup>\n                </Col>\n                <Col md={6}>\n                  <FormGroup>\n                    <Label for=\"signInPassword\">Entrez votre mot de passe</Label>\n                    <Input className=\"inputFormSignIn\" type=\"password\" name=\"signInPassword\" id=\"signInPassword\" onChange={this.handleChange}/>\n                  </FormGroup>\n                </Col>\n              </Row>\n              <Button outline color=\"success\" onClick={this.handleSignIn}>Connectez-vous</Button>\n            </Form>\n            <hr/>\n            <Form>\n              <Row className=\"formRowForSignin\">\n                <Col xs = \"12\">\n                  <h4 className=\"signCatForm\">Inscription</h4>\n                  {this.state.errorSignUp ?\n                  <Alert color=\"danger\">Oops, un bug! Est-ce que vous pourriez vous inscrire de nouveau? </Alert> : null }\n                  {this.state.alreadyInDB ?\n                  <Alert color=\"warning\">Il semblerait que vous soyez déjà un des notres, pourriez-vous vous connecter directement? </Alert> : null }\n                </Col>\n                <Col md={6}>\n                  <FormGroup>\n                    <Label for=\"lastName\">Votre nom</Label>\n                    <Input className=\"inputFormSignIn\" type=\"text\" name=\"lastName\" id=\"lastName\" onChange={this.handleChange}/>\n                  </FormGroup>\n                </Col>\n                <Col md={6}>\n                  <FormGroup>\n                    <Label for=\"firstName\">Votre prénom</Label>\n                    <Input className=\"inputFormSignIn\" type=\"text\" name=\"firstName\" id=\"firstName\" onChange={this.handleChange}/>\n                  </FormGroup>\n                </Col>\n                <Col md={6}>\n                  <FormGroup>\n                    <Label for=\"signUpEmail\">Votre email</Label>\n                    <Input className=\"inputFormSignIn\" type=\"email\" name=\"signUpEmail\" id=\"signUpEmail\" onChange={this.handleChange}/>\n                  </FormGroup>\n                </Col>\n                <Col md={6}>\n                  <FormGroup>\n                    <Label for=\"signUpPassword\">Créez un mot de passe</Label>\n                    <Input className=\"inputFormSignIn\" type=\"password\" name=\"signUpPassword\" id=\"signUpPassword\" onChange={this.handleChange}/>\n                  </FormGroup>\n                </Col>\n              </Row>\n              <Button outline color=\"success\" onClick={this.handleSignUp}>Inscrivez-vous</Button>\n            </Form>\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    signUpClick: function(user) {\n        dispatch( {type: 'signup', userSignUp: user} )\n    },\n    signInClick: function(user) {\n        dispatch( {type: 'signin', userSignIn: user} )\n    }\n  }\n}\n\nexport default connect(\n    null,\n    mapDispatchToProps\n)(AuthForm);\n"]},"metadata":{},"sourceType":"module"}